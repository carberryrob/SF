<footer class="site-footer p-5">
     <div class="row justify-content-md-between g-0">
         <div id="company-info" class="col-12 col-md-8 col-lg-9 col-xl-8 text-center text-md-start d-md-flex">
             <div class="holder col-12 col-md-8 col-lg-9 col-xl-8 col-xxl-7 d-flex flex-column flex-lg-row">
                 <a href="https://www.strategicfactoryportals.com/strategicfactory/catalog.cgi" title="Strategic Factory" class="d-block">
                     <img src="con/SF-Logo-2023_white.png" width="337" alt="Strategic Factory - Printing | Signage | Branding | Marketing" class="img-fluid me-md-2">
                 </a>
                 <div class="company-info my-4 my-lg-0 ms-lg-5">
                     <ul class="fa-ul mb-0">
                         <li><i class="fa-li fa fa-globe" aria-hidden="true"></i> 11195 Dolfield Blvd.<br>
                         Owings Mills, MD 21117                           
                         </li>                    <li>
                         <li><i class="fa-li fa fa-phone" aria-hidden="true"></i> <a href="tel:443.548.3500" title="Call us at 443.548.3500" class="text-white">443.548.3500</a><br>
                         <li><i class="fa-li fa fa-envelope" aria-hidden="true"></i> <a href="mailto:info@strategicfactory.com" title="Email us at info@strategicfactory.com" class="text-white">info@strategicfactory.com</a>
                         </ul>
                 </div>
             </div>
             <div class="account-links ps-xxl-2 col-12 col-md-4 col-lg-3 col-xl-4">
                 <h4 class="text-white">MY ACCOUNT</h4>
                 <ul class="list-unstyled ms-0 mb-0">
                     <li><a href="/strategicfactory/catalog.cgi">Start a New Order</a></li>
                     <li><a href="/strategicfactory/reorder.cgi">Place a Re-Order</a></li>
                     <li><a href="/strategicfactory/basket_view.cgi">View Cart</a></li>
                     <li><a href="/strategicfactory/item_form.cgi">Check Out</a></li>
                     <li><a href="/strategicfactory/cancel.cgi">Cancel Order</a></li>
                 </ul>
             </div>
         </div>
         <div id="social-links" class="col-12 col-md-4 col-lg-3 col-xl-4 text-center text-md-end mt-4 mt-md-0">
             <a class="text-white text-uppercase font-headings website-link" href="http://www.strategicfactory.com" target="_blank" title="Go to the Strategic Factory website">
                 Strategicfactory.com
             </a><br>
             <ul class="list-inline">
 
                                     
                 <li class="list-inline-item">
 
                     <a href="https://www.facebook.com/strategicfactory/" title="Follow us on Facebook" target="_blank">
                         <span class="fa-stack">
                             <i class="fa fa-circle fa-stack-2x"></i>
                             <i class=" fa-stack-1x fa fa-facebook"></i> <span class="sr-only">Follow us on Facebook</span>
                         </span>
                     </a>
 
                 </li>
 
             
                 <li class="list-inline-item">
 
                     <a href="https://www.instagram.com/strategicfactory/" title="Follow us on Instagram" target="_blank">
                         <span class="fa-stack">
                             <i class="fa fa-circle fa-stack-2x"></i>
                             <i class=" fa-stack-1x fa fa-instagram"></i> <span class="sr-only">Follow us on Instagram</span>
                         </span>
                     </a>
 
                 </li>
 
             
                 <li class="list-inline-item">
 
                     <a href="https://twitter.com/Strategicfact" title="Follow us on Twitter" target="_blank">
                         <span class="fa-stack">
                             <i class="fa fa-circle fa-stack-2x"></i>
                             <i class=" fa-stack-1x fa fa-twitter"></i> <span class="sr-only">Follow us on Twitter</span>
                         </span>
                     </a>
 
                 </li>
 
             
                 <li class="list-inline-item">
 
                     <a href="https://www.linkedin.com/company/strategic-factory" title="Follow us on Linkedin" target="_blank">
                         <span class="fa-stack">
                             <i class="fa fa-circle fa-stack-2x"></i>
                             <i class=" fa-stack-1x fa fa-linkedin"></i> <span class="sr-only">Follow us on Linkedin</span>
                         </span>
                     </a>
 
                 </li>
 
             
                 <li class="list-inline-item">
 
                     <a href="https://www.youtube.com/channel/UCBJBCxbv6lh5hvmEB8tKS3w" title="Follow us on Youtube" target="_blank">
                         <span class="fa-stack">
                             <i class="fa fa-circle fa-stack-2x"></i>
                             <i class=" fa-stack-1x fa fa-youtube-play"></i> <span class="sr-only">Follow us on Youtube</span>
                         </span>
                     </a>
 
                 </li>
 
             </ul>
         </div>
     </div>
</footer>
 
<footer class="bg-tertiary text-white px-5 py-4 text-center text-lg-start">
     <p class="mb-0">Copyright 2022 Strategic Factory. All Rights Reserved.</p>
</footer>

<!--script src="https://combinatronics.com/digitalsf/custom-page-dna/main/custom.js" type="text/javascript" defer></script-->

<script src="https://cdn.jsdelivr.net/gh/digitalsf/custom-page-dna@main/custom.js" type="text/javascript" defer></script>
<script src="con/bundle.js" type="text/javascript" defer></script>

<script type="text/javascript" defer>
{/* Rob Carberry 2024 */}
{/* Since we are wrapping the item images, we need to customize the pdna set_preview_image function */}
function set_preview_image(elem, thumburl, largeurl) {
	// console.log( $(elem).parent().find('a').index($(elem)) );
	var idx = $(elem).parent().find('a').index($(elem));
	var img = $(elem).parents('.image-row,.item-thumbnail').find('.image-container .imgwrap > a > img, .image-container .imgwrap > img, .image-container .imgwrap > label > img');
	var a = $(elem).parents('.image-row,.item-thumbnail').find('.image-container .imgwrap > a');
	var imgbtn = $(elem).parents('.image-row').find('input[type="image"][src!="img/catalog_add.gif"]');
	var mobile_img = $(elem).parents('.detail_image_wrapper').find('#d_preview_image > img');

	// console.log(thumburl + ' :|: ' + largeurl);
	
	if (img.length) {
		thumburl = largeurl
		img.attr('src', thumburl);
	}
	else if (imgbtn.length) {
		thumburl = largeurl
		imgbtn.attr('src', thumburl);
	}
	else if (mobile_img.length) {
		mobile_img.attr('src', thumburl);
	}
	if (a.length) {
		if (largeurl.startswith('img/')) {
			a.attr('href', largeurl);
		}
		else {
			a.attr('onclick', unescape(largeurl));
			// a.attr('href', largeurl);
		}
	}
	// When clicking/changing Thumbnail images on Apparel, change the dropdown as well.
	var colorselect = $(elem).closest('.stretchy_cols.responsive-item.image-row').find('.colorselect');
	if ($(colorselect).length > 0) {
		$(colorselect).prop('selectedIndex', idx);
	}
}

{/* Scale window to fit based on the item widths */}
function WidthAdjuster(){
	if ($('#all_items_view').hasClass('all-items-hide')){
		return;
	}
	// console.log('WidthAdjuster')
	// if (ow > 0) {ow = ow / 2}
	var w = $(window).width(),
		// 'p' is used to prevent the all_items_view from wrapping
		//  to a new line when the window is around 1030px
		//  p = 5,
		p = 1,
		t = $('.responsive_tabs-shell').width(),
		n = 0;
		if ($('div#basket-list-title').is(":hidden")) {t = 0}
		// t = t + ow;
	n = 100 - ((t/w) * 100) - p;

	$('#all_items_view').css({
		'float': 'right',
		'width': n+'%'
	});
}

{/* Function to scroll zoomed image into view if once zoomed it moves off the viewport */}
$.fn.ensureVisible = function () { $(this).each(function () { $(this)[0].scrollIntoView(); }); };

{/* Function to adjust the page size to fit a zoomed image then scroll it into view */}
function AdjustForIMG(elem){
	if ($(elem).closest('.imgwrap').find('input[type=checkbox].zoomCheck').is(':checked')){
		var ofs = $(elem).offset();
		var oh = $(elem).outerHeight();
		var ow = $(elem).outerWidth();
		// console.log(ofs)
		// console.log($(elem).closest('.imgwrap').find('input[type=checkbox].zoomCheck').is(':checked'));
		var mb = parseInt($("#copy5").css("margin-bottom").replace("px", ""));
		while (ofs.top < 0){
			mb += 1;
			// console.log(mb);
			$("#copy5").css("margin-bottom", mb + "px");
			ofs = $(elem).offset();
		}
		ofs = $(elem).offset();
		var alli = $("div#all_items_view").width();
		while (ofs.left < 0) {
			alli -= 1
			$("div#all_items_view").width(alli);
			ofs = $(elem).offset();
		}
		// $(elem).ensureVisible();
		var topPos = ofs.top - $(window).scrollTop();
		var rightPos = $(elem)[0].getBoundingClientRect().right  + $(window)['scrollLeft']();
		var mp = $(elem).parents('.image-container').find('.multi_preview');
		var bottomPos = $(mp)[0].getBoundingClientRect().bottom + $(window)['scrollTop']();
		// console.log( topPos + " | " + bottomPos + " | " + $(window)['scrollTop']() + " | " + $(window).height() + " | " + ((bottomPos-$(window)['scrollTop']()) >= $(window).height()) );
		if ((rightPos > $(window).width()) || (topPos < 0) || ((bottomPos-$(window)['scrollTop']()) > $(window).height())){$(elem).ensureVisible();}
	}
}


$(window).load(function () {
     if($(window).width() >= 1025) {
		// ************ Size stretchy column items so all are top aligned and buttons are uniform *************
		
		// Wrap item imgs and thumbnails for sizing
		$('div.image-container:not(:has(>div.multi_preview)').append('<div class="multi_preview"></div>');
		$("div.image-container").find('img:first').each(function() {
			if ($(this).parent('a').length > 0) {
				$(this).parent('a').wrap('<div class="imgwrap">')
			}else{
				$(this).wrap('<div class="imgwrap">')
			}
		});


		// Handle zoom for images. *********************************************************************
		if ( $( "input[name='tab']" ).length > 0 ) {
			if ( $( "input[name='tab']" ).val().toLowerCase().indexOf("ms word templates") < 0) {
				$(".image-container img").not("img.catalog-tiny-thumbnail").each(function() {
					if ($(this).parent().prop('nodeName') == 'A') {  
						$(this).unwrap();
						// return
						// if its a link then just unwrap the img to remove the link
					}else{
						// if it's a kit then create a new image and add it to the DOM, and remove the original so it doesn't use ng-click.
						var source = $(this).attr('src'); //get img source for new img
						var alt = $(this).attr('alt'); //get img alt text for new img
						$(this).parent().prepend('<img alt="' + alt + '" src = "' + source + '">'); // add img to DOM at .img-container
						$(this).remove(); // remove orginal img that was using ng-click.
					}
				});
				// console.log($('.imgwrap > img').length);
				x=0
	
				$(".image-container img").not("img.catalog-tiny-thumbnail").on('load', function () {
					// console.log('** img load')
					AdjustForIMG(this);
				});
	
				$('.imgwrap > img').each(function() {
					x += 1
					$(this).on('transitionend webkitTransitionEnd oTransitionEnd', function () {
						AdjustForIMG($(this));
						// console.log('img transition end');
					});
					$(this).wrap('<label for="zoomCheck' + x + '">');
					$(this).parents('.imgwrap').prepend('<input type="checkbox" id="zoomCheck' + x + '" class="zoomCheck">');
	
				});
	
				$('input[type=checkbox].zoomCheck').change(function() {
					if(this.checked) {
						var thisid = $(this).attr('id');
						// console.log(thisid);
						$('input[type=checkbox].zoomCheck:checked').each(function() {
							if ($(this).attr('id') != thisid) {
								$(this).prop('checked', false); // Unchecks all others that are checked.
							}
						});
					}else{
						$("#copy5").css("margin-bottom", "0px");
						WidthAdjuster();
					}
				});
			}
		}
		// *********************************************************************************************
		


		// Set height of img wraps based on tallest img so items can be top aligned 
		var maxH = 0
		$('div.imgwrap').each(function() {
			if ($(this).height() > maxH) {maxH = $(this).height();}
		});
		if (maxH > 0) {maxH += 1;}
		maxH = maxH + "px";
		$('div.imgwrap').css('min-height', maxH); /* set all the wrapped heights to the tallest img height */
		
		// If multi-page img thumbs exist set that area height the same for all items
		maxH = 0
		$('div.multi_preview').each(function() {
			if ($(this).height() > maxH) {maxH = $(this).height();}
		});
		if (maxH > 0) {maxH += 1;}
		maxH = maxH + "px";
		$('div.multi_preview').css('min-height', maxH);

		// If Responsive Longname exist set that area height the same for all items
		maxH = 0
		$('div.responsive-longname').each(function() {
			if ($(this).height() > maxH) {maxH = $(this).height();}
		});
		if (maxH > 0) {maxH += 1;}
		maxH = maxH + "px";
		$('div.responsive-longname').css('min-height', maxH);

		// If .responsive-choose-info exist set that area height the same for all items
		maxH = 0
		$('div.responsive-choose-info').each(function() {
			if ($(this).height() > maxH) {maxH = $(this).height();}
		});
		if (maxH > 0) {maxH += 1;}
		maxH = maxH + "px";
		$('div.responsive-choose-info').css('min-height', maxH);

		// If .note.responsive-pricing exist set that area height the same for all items
		maxH = 0
		$('div.note.responsive-pricing').each(function() {
			if ($(this).height() > maxH) {maxH = $(this).height();}
		});
		if (maxH > 0) {maxH += 1;}
		maxH = maxH + "px";
		$('div.note.responsive-pricing').css('min-height', maxH);

		// If onhand exist set that area height the same for all items
		maxH = 0
		$('div.note.responsive-onhand').each(function() {
			if ($(this).height() > maxH) {maxH = $(this).height();}
		});
		// console.log('1: ' + maxH);
		if (maxH > 0) {maxH += 1;}
		// console.log('2: ' + maxH);
		maxH = maxH + "px";
		$('div.note.responsive-onhand').css('min-height', maxH);
		
		// If responsive-tagcheck.tagcheck-bottom exist set that area height the same for all items
		maxH = 0
		$('span.responsive-tagcheck.tagcheck-bottom').each(function() {
			if ($(this).height() > maxH) {maxH = $(this).height();}
		});
		// console.log('1: ' + maxH);
		if (maxH > 0) {maxH += 1;}
		// console.log('2: ' + maxH);
		maxH = maxH + "px";
		$('span.responsive-tagcheck.tagcheck-bottom').css('min-height', maxH);
	
		// If div.image-container exist set that area height the same for all items
		maxH = 0
		$("div.image-container").each(function() {
			if ($(this).height() > maxH) {maxH = $(this).height();}
		});
		// console.log('1: ' + maxH);
		if (maxH > 0) {maxH += 1;}
		// console.log('2: ' + maxH);
		maxH = maxH + "px";
		$("div.image-container").css('min-height', maxH);
	
		// *****************************************************************************************
     }
});     
</script>
<script type="text/javascript" defer>
{/* Rob Carberry - So we can customize the pdna itemWidthAdjuster function we add the code from responsive_catalog.js so we can alter the function */}
$(document).ready(function(){
     if ($(window).width() >= 1025) {
          // return;
          // bugfix var for iOS
          var loadedWidth = $(window).width();

          windowSansScrollBars = 535;

          ///////////////////////////////////////////////
          // Set up Variables
          ///////////////////////////////////////////////

          var searchNavBar = $('.before'),
               tabList = $('#tab_responsive_tabs'),
               onsAndOffs = $('div.on, div.off, dfn.on, dfn.off'),
               navTabs = $('#navTabs'),
               mainSection = $('.main-section'),
               allItems = $('#all_items_view'),
               itemDetails = $('#item_details_view'),
               tabCloser = $('#mobile_tab_closer'),
               tabExiter = $('.exit_overlay'),
               tabShell = $('.responsive_tabs-shell'),
               searchButton = $('#submit_catalog_search'),
               oldSearchBtnHtml = searchButton.html(),
               tabDivs = $('.responsive_tabs div[id^="tab_"]'),
               tabOnDiv = $('.responsive_tabs div.on'),
               heightAdjuster = $('.height-adjuster'),
               loadedStretchyColHeight = $('.stretchy_cols').css('height'),
               footer = $('.footer');


          ///////////////////////////////////////////////
          // Set up Functions
          ///////////////////////////////////////////////

          // Remove style attr of element if it exists
          function killStyleAttr (elm) {
               // console.log('killStyleAttr');
               if (elm.attr('style')) {
                    elm.removeAttr('style');
               }
          }

          // Scale window to fit based on the item widths
          function itemWidthAdjuster(){
               // console.log('itemWidthAdjuster')
               if (allItems.hasClass('all-items-hide')){
                    return;
               }
               var w = $(window).width(),
                    // 'p' is used to prevent the all_items_view from wrapping
                    //   to a new line when the window is around 1030px
                    // p = 5,
                    p = 1,
                    t = tabShell.width(),
                    n = 0;
                    if ($('div#basket-list-title').is(":hidden")) {t = 0}
               n = 100 - ((t/w) * 100) - p;

               allItems.css({
                    'float': 'right',
                    'width': n+'%'
               });
          }

          // On page load, call different height adjusters
          function initialAdjuster (selector) {
               // console.log('initialAdjuster');
               if ($(window).outerWidth() >= windowSansScrollBars) {
                    killStyleAttr(selector);
                    itemScaler(selector, 2);
               }
               else if ($(window).outerWidth() < windowSansScrollBars) {
                    // Kill the itemScaler stuff here too on resize
                    killStyleAttr(selector);
                    itemScaler(selector, 1);
               }
          }

          // Get items to fit within cells better, bottom aligned

          function itemScaler (selector, rows) {
               // console.log('itemScaler');
               selector.each(function() {
                    var tempHeight = $(this).height(),
                         tempParentHeight = $(this).parent().outerHeight();
                    if (tempHeight <= tempParentHeight){
                         killStyleAttr($(this).parent());
                         if (rows == 2) {
                              $(this).css('margin-top', tempParentHeight - tempHeight);
                              singleItemCenter();
                         }
                         else if (rows == 1) {
                              // this is affecting the stretchy_cols class
                              $(this).parent().css({
                                   'min-height': tempHeight,
                                   'max-height': tempHeight,
                                   'height': tempHeight,
                              });
                         }
                    }
               });
          }

          // if there is only one item, center it.
          function singleItemCenter() {
               // console.log('singleItemCenter');
               if( $('.stretchy_cols').length < 2) {
                    $('.stretchy_cols').css({
                         'min-width': '100%',
                         'max-width': '100%',
                         'width': '100%'
                    });
               }
          }

          // Hide / Show logic for Tabs
          function tabHandler(action) {
               // console.log('tabHandler');
               var openTabs = false;
               if (!action){return;}
               if (action == 'open') {
                    tabExiter.addClass('visible');  // add fake area for clicking out of tabs
                    tabDivs.addClass('temphide');
                    onsAndOffs.hide();
                    tabList.animate({
                    width:'toggle'
                    },300).promise().done(function(){
                    tabDivs.removeClass('temphide');
                    onsAndOffs.fadeIn(100);
                    killStyleAttr(tabOnDiv);
                    $('body, html').css('overflow','hidden');
                    });
                    mainSection.add(searchNavBar).css('pointer-events', 'none');
                    openTabs = true;
                    itemWidthAdjuster();
               }
               else if (action == 'close') {
                    tabExiter.removeClass('visible');
                    tabDivs.addClass('temphide');
                    onsAndOffs.fadeOut(100);
                    tabList.animate({width:'toggle'}, 300).promise().done(function(){
                    tabDivs.removeClass('temphide');
                    $('body, html').css('overflow','visible');
                    });
                    openTabs = false;
                    mainSection.add(searchNavBar).css('pointer-events', 'auto');
                    itemWidthAdjuster();
               }
          }

          // Scale the height of main class to be that of the items within it + 50 for spacing
          function pageScaler () {
               // console.log('pageScaler');
               // return;
               var hiddenFooter = 0,
                    timeVar = 0;
               if (allItems.hasClass('all-items-hide')){
                    return;
               }
               if(footer.css('display') != 'none') {
                    // If there is a footer on the page, hide it, wait for page to be drawn, then show footer
                    // This was the result of another hyper-urgent Costco demand....
                    footer.hide();
                    hiddenFooter = 1;
                    // timeVar = 1000;
                    timeVar = 1;
               }
               setTimeout(function () {
                    var taller = Math.max(tabShell.outerHeight(), allItems.outerHeight());
                    if (window.innerWidth > RESPONSIVE.max()) {
                    taller += $('#copy2').outerHeight();
                    taller += $('#copy3').outerHeight();
                    taller += $('#copy4').outerHeight();
                    taller += $('#copy5').outerHeight();
                    taller += $('.pagetitle.no_mobile').outerHeight();
                    }
                    $('.select-items, .catalog, form').animate({height:(taller + 50)},3);
                    if (hiddenFooter == 1) {
                         footer.fadeIn();
                    }
               }, timeVar);
          }


          ///////////////////////////////////////////////
          // Set up Media Query
          /////////////////////////////////////////////////
          if (matchMedia) {
               mq = matchMedia("(max-width: " + RESPONSIVE.max() + "px)");
               mq.addListener(catalogWidthChange);
               catalogWidthChange(mq);
          }

          //////////////////////////////////////////////////
          // Set up Changer for mobile vs non-mobile
          //////////////////////////////////////////////////
          function catalogWidthChange(mq) {
               // console.log('catalogWidthChange');
               //////////////////////////////////////////////////
               // WE ARE IN MOBILE VIEW HERE....
               //////////////////////////////////////////////////
               if (mq.matches) {

                    $('.detail_closer').click();  // close details so item grid works

                    tabList.hide();
                    navTabs.add(tabCloser).show();

                    // Show magnifying glass in search
                    searchButton.html('<i class="fa fa-search">Â </i>');

                    // trying this for use with footnote, may need revisiting if this doesn't work
                    $(window).on('load',function(){
                         pageScaler();
                    });

                    // stop floating allItems once in mobile
                    $(window).resize(function() {
                         // console.log('resize triggered1');
                         if (itemDetails.css('display') != 'none'){
                              return;
                         }
                         if ($(window).width() != loadedWidth) {
                              killStyleAttr(allItems);
                              pageScaler();
                         }
                         // console.log('resize finished1');
                    });

                    // As the window resizes, call different height adjusters
                    $(window).resize(function() {
                         // console.log('resize triggered2');
                         if (itemDetails.css('display') != 'none'){
                              return;
                         }
                         if ($(window).width() != loadedWidth) {
                              if ($(window).outerWidth() >= windowSansScrollBars) {
                                   killStyleAttr(heightAdjuster);
                                   itemScaler(heightAdjuster, 2);
                              }
                              else if ($(window).outerWidth() < windowSansScrollBars) {
                                   // Kill the itemScaler stuff here too on resize
                                   killStyleAttr(heightAdjuster);
                                   itemScaler(heightAdjuster, 1);
                              }
                         }
                         // console.log('resize finished2');
                    });

                    singleItemCenter();

                    navTabs.on('click', function(){tabHandler('open');});
                    tabCloser.on('click', function(){tabHandler('close');});
                    tabExiter.on('click', function(){
                         if ($('#mobile_link_box').css('display') != 'block') {
                              tabHandler('close'); // close tabs if links aren't showing
                         }
                    });

                    $(window).on('load',function(){initialAdjuster(heightAdjuster);});

               }

               //////////////////////////////////////////////////
               // WE ARE NOT IN MOBILE VIEW HERE....
               //////////////////////////////////////////////////
               else {

                    $('.detail_closer').click();  // close details so item grid works

                    navTabs.add(tabCloser).hide();
                    tabList.show();

                    singleItemCenter();

                    searchButton.html(oldSearchBtnHtml);

                    // runtime adjustment:
                    itemWidthAdjuster();

                    $(window).on('load',function(){
                    initialAdjuster(heightAdjuster);
                    pageScaler();
                    });

                    // resizing adjustment
                    $(window).resize(function() {
                         // console.log('resize triggered3');
                         if (itemDetails.css('display') != 'none'){
                              return;
                         }
                         if ($(window).width() < (parseInt(RESPONSIVE.min(), 10) - RESPONSIVE.scrollbars())) {
                              return;  //this is necessary despite the WidthChange context here...
                         }
                         itemWidthAdjuster();
                         pageScaler();

                         // let's be sure the item is not obscured by a short stretchy_col
                         // AND let's make all stretchy_cols on the page the same height
                         var tall = loadedStretchyColHeight,
                              safetyPadding = 10,
                              tallest;
                         heightAdjuster.each(function() {
                              // loop over height-adjuster cells and get the max height
                              if ($(this).height() > $(this).parent().height()) {
                                   var taller = Math.max(tall, $(this).height()) + safetyPadding;
                                   tallest = Math.max(tall, tallest);
                              }else {
                                   return;
                              }
                         });
                         // now set the parent height on all height-adjusters to this calculated height
                         heightAdjuster.parent().css({
                              'min-height': tallest,
                              'max-height': tallest,
                              'height': tallest,
                         });
                         // console.log('resize end3');
                    });

                    // Kill the itemScaler stuff
                    killStyleAttr(heightAdjuster);

                    // show tabs again in case we hid them in mobile then went back to desktop
                    if (onsAndOffs.attr('style')) {onsAndOffs.removeAttr('style');}

                    // reset pointer events to be safe
                    mainSection.add(searchNavBar).css('pointer-events', 'auto');

                    // unbind all click events so they start fresh if window shrinks back down
                    navTabs.add(tabCloser).add(tabExiter).unbind("click");

                    tabExiter.removeClass('visible');

                    // in case someone opened tabs, didn't close them, and increased window size
                    $('body, html').css('overflow','visible');

               } // end else for mq.matches

          } // end WidthChange function


          //////////////////////////////////////////////////
          // After all our magic is done - let the user see
          //////////////////////////////////////////////////
          var throbOverlay = $('#ajax_throbber_overlay');
          throbOverlay.show();
          $('body').animate({scrollTop: 0}, 200);
          $(window).on('load',function() {

               $('body').css('opacity', '1');

               if ($.active > 0) {
                    $(document).ajaxComplete(function(){
                    throbOverlay.animate({
                         opacity: 0,
                         duration: 1000,
                    }).promise().done(function(){
                         throbOverlay.hide();
                         });
                    });
               }
               else {
                    // no ajax, no throbber
                    throbOverlay.hide();
               }

          });
     }
});	
</script>
      